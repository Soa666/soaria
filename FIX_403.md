# 403 Fehler beheben

## Problem
- `api/inventory: 403`
- `api/files/items: 403`
- `api/admin/buildings: 403`

Diese Fehler bedeuten, dass du nicht authentifiziert bist.

## Lösung

### 1. Einloggen / Neu einloggen

```bash
# Öffne die Website
https://soaria.soa666.de

# Logge dich ein:
# - Falls du bereits einen Account hast: Login-Seite
# - Falls nicht: Registriere dich neu
```

**Wichtig:** Nach dem Login sollte der Token im Browser-LocalStorage gespeichert sein.

### 2. Browser-Cache löschen (falls nötig)

Falls das nicht hilft:
- **Chrome/Edge:** Strg+Shift+Del → "Gespeicherte Bilder und Dateien im Cache" → Letzte Stunde
- **Firefox:** Strg+Shift+Del → "Cache" → Letzte Stunde

Oder **Hard Refresh:**
- **Windows/Linux:** Strg+Shift+R oder Strg+F5
- **Mac:** Cmd+Shift+R

### 3. Prüfen ob Token gespeichert ist

**Browser Developer Tools (F12):**
1. Öffne Developer Tools (F12)
2. Gehe zu "Application" (Chrome) oder "Storage" (Firefox)
3. Klicke auf "Local Storage"
4. Wähle `https://soaria.soa666.de`
5. Prüfe ob `token` vorhanden ist

**Falls kein Token vorhanden ist:**
- Logge dich aus und wieder ein
- Prüfe die Browser-Konsole auf Fehler

### 4. Backend-Logs prüfen

```bash
cd ~/Soaria
pm2 logs soaria-backend --lines 30
```

Schau nach Fehlern wie:
- "Invalid token"
- "Token expired"
- "Unauthorized"

### 5. Falls du Admin-Rechte brauchst

Falls du Admin-Panel nutzen willst, stelle sicher, dass dein Account Admin-Rechte hat:

```bash
cd ~/Soaria/backend
sqlite3 spiel.db "UPDATE users SET role='admin' WHERE username='Soa';"
pm2 restart soaria-backend --update-env
```

### 6. CORS-Konfiguration prüfen (falls Token vorhanden)

Falls Token vorhanden ist aber immer noch 403, prüfe Backend-CORS:

```bash
cd ~/Soaria/backend
cat server.js | grep -A 3 "cors"
```

Sollte sein:
```javascript
app.use(cors());
```

Oder mit expliziter Origin-Konfiguration (falls nötig):
```javascript
app.use(cors({
  origin: ['https://soaria.soa666.de', 'http://localhost:3000'],
  credentials: true
}));
```
